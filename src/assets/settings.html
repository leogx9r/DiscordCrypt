<div id="dc-overlay" class="dc-overlay">
    <div id="dc-overlay-upload" class="dc-overlay-centerfield" style="display:none;">
        <div class="dc-ruler-align">
            <input type="text" class="dc-input-field" id="dc-file-path"
                   style="width: 100%;padding: 2px;margin-left: 4px;" readonly title="File Path"/>
            <button class="dc-button dc-button-inverse" type="button" id="dc-select-file-path-btn"
                    style="top: -8px;">
                <span class="dc-tooltip">
                    <span class="dc-tooltip-text">Select A File To Upload</span>
                    . . .
                </span>
            </button>
        </div>

        <textarea class="dc-textarea" rows="20" cols="128" id="dc-file-message-textarea"
                  placeholder="Enter any addition text to send with your message ..." maxlength="1820"></textarea>

        <div class="dc-ruler-align" style="font-size:14px; padding-bottom:10px;">
            <input id="dc-file-deletion-checkbox" class="dc-checkbox" type="checkbox"
                   style="margin-left: 0;">
            <span style="margin-top: 5px;" class="dc-tooltip">
                <span class="dc-tooltip-text">
                    If enabled, a deletion link will be sent along with the file link that can be used
                    to delete the file immediately.
                </span>
                Send Deletion Link
            </span>
        </div>
        <div class="dc-ruler-align" style="font-size:14px; padding-bottom:10px;">
            <input id="dc-file-name-random-checkbox" class="dc-checkbox" type="checkbox"
                   style="margin-left: 0;">
            <span style="margin-top: 5px;" class="dc-tooltip">
                <span class="dc-tooltip-text">
                    If enabled, the upload file's name will be randomized but extension will be kept.
                </span>
                Randomize File Name
            </span>
        </div>

        <div class="stat stat-bar">
            <span id = "dc-file-upload-status" class="stat-bar-rating" style="width: 0;"/>
        </div>

        <div class="dc-ruler-align">
            <button class="dc-button" style="width:100%;" id="dc-file-upload-btn">Upload</button>
        </div>

        <div class="dc-ruler-align">
            <button class="dc-button dc-button-inverse" style="width:100%;" id="dc-file-cancel-btn">
                Close</button>
        </div>
    </div>
    <div id="dc-overlay-password" class="dc-overlay-centerfield" style="display:none;">
        <span>Primary Password:</span>
        <input type="password" class="dc-password-field" id="dc-password-primary" placeholder="..."/><br/>

        <span>Secondary Password:</span>
        <input type="password" class="dc-password-field" id="dc-password-secondary" placeholder="..."/><br/>

        <div class="dc-ruler-align">
            <button class="dc-button" id="dc-save-pwd">Update Passwords</button>
            <button class="dc-button dc-button-inverse" id="dc-reset-pwd">Reset Passwords</button>
            <button class="dc-button dc-button-inverse" id="dc-cancel-btn">Cancel</button>
        </div>

        <button class="dc-button dc-button-inverse" style="width: 100%;" id="dc-cpy-pwds-btn">
            Copy Current Passwords</button>
    </div>
    <div id="dc-update-overlay" class="dc-overlay-centerfield" style="border: 1px solid; z-index: 5000; display: none">
        <span>DiscordCrypt: Update Available</span>
        <div class="dc-ruler-align">
            <strong class="dc-update-field" id="dc-new-version"/>
        </div>
        <div class="dc-ruler-align">
            <strong class="dc-update-field" id="dc-old-version"/>
        </div>
        <div class="dc-ruler-align">
            <strong class="dc-update-field">Changes:</strong></div>
        <div class="dc-ruler-align">
            <textarea class="dc-textarea" rows="20" cols="128" id="dc-changelog" readonly
                      placeholder="Update Changes ..."/>
        </div>
        <br>
        <div class="dc-ruler-align">
            <button class="dc-button" id="dc-restart-now-btn" style="width: 33%;">
                Reload Now</button>
            <button class="dc-button dc-button-inverse" id="dc-restart-later-btn" style="width: 33%;">
                Reload Later</button>
            <button class="dc-button dc-button-inverse" id="dc-ignore-update-btn" style="width: 33%">
                Ignore Update</button>
        </div>
    </div>
    <div id="dc-overlay-settings" class="dc-overlay-main" style="display: none;">
        <div class="tab" id="dc-settings-tab">
            <button class='dc-tab-link' id="dc-plugin-settings-btn">Plugin Settings</button>
            <button class='dc-tab-link' id="dc-database-settings-btn">Database Settings</button>
            <button class='dc-tab-link' id="dc-security-settings-btn">Security Settings</button>
            <button class='dc-tab-link' id="dc-exit-settings-btn" style="float:right;">✖</button>
        </div>
        <div class="tab-content" id="dc-plugin-settings-tab" style="display: block;">
            <p style="text-align: center;">
                <b>DiscordCrypt Settings</b>
            </p>
            <br/><br/>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Primary Cipher:</div>
                <select class="dc-input-field" id="dc-primary-cipher" title="Primary Cipher">
                    <option value="bf" selected>Blowfish ( 512-Bit )</option>
                    <option value="aes">AES ( 256-Bit )</option>
                    <option value="camel">Camellia ( 256-Bit )</option>
                    <option value="tdes">TripleDES ( 192-Bit )</option>
                    <option value="idea">IDEA ( 128-Bit )</option>
                </select>
            </div>

            <div class="dc-hint">
                <p>This indicates the cipher used to encrypt the inner ciphertext of a message.</p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Secondary Cipher:</div>
                <select class="dc-input-field" id="dc-secondary-cipher" title="Secondary Cipher">
                    <option value="bf">Blowfish ( 512-Bit )</option>
                    <option value="aes">AES ( 256-Bit )</option>
                    <option value="camel">Camellia ( 256-Bit )</option>
                    <option value="idea">IDEA ( 256-Bit )</option>
                    <option value="tdes">TripleDES ( 192-Bit )</option>
                </select>
            </div>

            <div class="dc-hint">
                <p>This indicates the cipher used to encrypt the outer ciphertext of a message.</p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Cipher Padding Mode:</div>
                <select class="dc-input-field" id="dc-settings-padding-mode" title="Cipher Padding Scheme">
                    <option value="pkc7">PKCS #7</option>
                    <option value="ans2">ANSI X9.23</option>
                    <option value="iso1">ISO 10126</option>
                    <option value="iso9">ISO 97971</option>
                </select>
            </div>

            <div class="dc-hint">
                <p>This indicates the message padding scheme used for both ciphers.</p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Cipher Block Operation Mode:</div>
                <select class="dc-input-field" id="dc-settings-cipher-mode" title="Cipher Block Operation Mode">
                    <option value="cbc">Cipher Block Chaining</option>
                    <option value="cfb">Cipher Feedback Mode</option>
                    <option value="ofb">Output Feedback Mode</option>
                </select>
            </div>

            <div class="dc-hint">
                <p>This indicates the block mode of operation for both ciphers.</p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Default Encryption Password:</div>
                <input type="text" class="dc-input-field" id="dc-settings-default-pwd"
                       title="Default Encryption Password"/>
            </div>

            <div class="dc-hint">
                <p>This is the default password used to decrypt messages in channels without a password being set.</p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Decrypted Message Prefix:</div>
                <input type="text" class="dc-input-field" id="dc-settings-decrypted-prefix"
                       title="Decrypted Message Prefix"/>
            </div>

            <div class="dc-hint">
                <p>This indicates what will be added to the start of a decrypted message. Can be empty.</p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Decrypted Message Color:</div>
                <input type="text" class="dc-input-field" id="dc-settings-decrypted-color"
                       title="Decrypted Message Color"/>
            </div>

            <div class="dc-hint">
                <p>This indicates the color of the decrypted messages.</p>
            </div>
			
			<div class="dc-ruler-align">
                <div class="dc-input-label">Localize channel settings:</div>
                <input type="checkbox" class="dc-checkbox" id="dc-local-states"
                       title="Localize channel settings"/>
            </div>

            <div class="dc-hint">
                <p>If enabled, each channel will have its own settings.</p>
				<p>Eg. Automatic encryption will be based per channel.</p>
				<p>
				<b style="color: #f00">WARNING:</b>
				<b>This setting increases your database file and may result in a laggier experience over time.<b>
				<br>
				Disable to delete all current channel configurations
				</p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Scanning Frequency:</div>
                <input type="text" class="dc-input-field" id="dc-settings-scan-delay"
                       title="Scanning Frequency"/>
            </div>

            <div class="dc-hint">
                <p>Indicates how often to scan for encrypted messages.</p>
                <p>Lower values result in better readability but at the cost of more CPU usage.</p>
                <p>This value is in <u>milliseconds</u>.</p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Message Trigger:</div>
                <input type="text" class="dc-input-field" id="dc-settings-encrypt-trigger" title="Message Trigger"/>
            </div>

            <div class="dc-hint">
                <p>The suffix at the end of a typed message to indicate whether to encrypt the text.</p>
                <p>Example: <u>This message will be encrypted.|ENC</u></p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Timed Message Expiration:</div>
                <input type="number" class="dc-input-field" id="dc-settings-timed-expire"
                       title="Timed Message Expiration"/>
            </div>

            <div class="dc-hint">
                <p>This indicates how long after an encrypted message is sent, should it be deleted in minutes.</p>
                <p><u>Set this to "0" to disable timed messages.</u></p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">New Master Database Password:</div>
                <input type="password" class="dc-input-field" id="dc-master-password"
                       title="New Master Database Password"/>
            </div>

            <div class="dc-hint">
                <p>If specified, your master password will be updated to this.</p>
            </div>

            <div class="dc-ruler-align">
                <div class="dc-input-label">Use Embedded Messages:</div>
                <input type="checkbox" class="dc-checkbox" id="dc-embed-enabled"
                       title="Use Embedded Messages"/>
            </div>

            <div class="dc-hint">
                <p>If enabled, send all encrypted messages using embeds.</p>
                <p>
                    <b style="color: #f00">WARNING:</b>
                    <b>By using embedded messages, you may be flagged by Discord and
                        have your embed permissions globally revoked.</b>
                    <br/>
                    <b>Enable this option at your own digression.
                        The plugin's authors will not be held liable for any potential consequences.</b>
                </p>
            </div>

            <div class="dc-ruler-align">
                <button id="dc-settings-save-btn" class="dc-button">Save & Apply</button>
                <button id="dc-settings-reset-btn" class="dc-button dc-button-inverse">
                    Reset Settings</button>
            </div>

            <div class="dc-ruler-align">
                <button class="dc-button">
                    <a style="color: #fff !important;"
                       href="https://discordapp.com/invite/VZ89JZ" target="_blank">Join Support Server</a>
                </button>
                <button class="dc-button">
                    <a style="color: #fff !important;"
                       href="https://gitlab.com/leogx9r/DiscordCrypt" target="_blank">Visit Source Repository</a>
                </button>
            </div>

            <br/><br/><br/><br/>
        </div>
        <div class="tab-content" id="dc-database-settings-tab">
            <p style="text-align: center;">
                <b>Database Settings</b>
            </p>
            <br/><br/>

            <div class="dc-scroll-table">
                <table class="dc-table">
                    <thead>
                    <tr>
                        <th><b>Channel</b></th>
                        <th><b>Name</b></th>
                        <th><b>Options</b></th>
                    </tr>
                    </thead>
                    <tbody id="dc-database-entries">
                        <tr>
                            <td>Placeholder</td>
                            <td>Placeholder</td>
                            <td><button class="dc-button dc-button-inverse dc-button-small">Delete Entry</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <br/><br/>
            <div class="dc-ruler-align">
                <button class="dc-button" id="dc-import-database-btn">Import Database(s)</button>
                <button class="dc-button dc-button-inverse" id="dc-export-database-btn">Export Database</button>
                <button class="dc-button dc-button-inverse" id="dc-erase-entries-btn">Erase Entries</button>
            </div>
        </div>
        <div class="tab-content" id="dc-security-settings-tab">
            <p style="text-align: center;">
                <b>Security Settings</b>
            </p>
            <br/><br/>

            <p><b>Blacklisted Updates</b></p>
            <div class="dc-scroll-table">
                <table class="dc-table">
                    <thead>
                    <tr>
                        <th><b>Version</b></th>
                        <th><b>Options</b></th>
                    </tr>
                    </thead>
                    <tbody id="dc-update-blacklist-entries">
                    <tr>
                        <td></td>
                        <td></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <br/><br/>
            <div class="dc-ruler-align">
                <div class="dc-input-label">Automatically Check For Updates:</div>
                <input type="checkbox" class="dc-checkbox" id="dc-automatic-updates-enabled"
                       title="Use Embedded Messages">
            </div>

            <br/><br/>
            <div class="dc-ruler-align">
                <button class="dc-button" id="dc-update-check-btn">Check For Updates</button>
            </div>
        </div>

        <br/><br/><br/><br/>
    </div>
    <div id="dc-overlay-exchange" class="dc-overlay-main" style="display: none;">
        <div class="tab" id="dc-exchange-tab">
            <button class='dc-tab-link' id="dc-tab-info-btn">Info</button>
            <button class='dc-tab-link' id="dc-tab-keygen-btn">Key Generation</button>
            <button class='dc-tab-link' id="dc-tab-handshake-btn">Secret Computation</button>
            <button class='dc-tab-link' id="dc-exit-exchange-btn" style="float:right;">✖</button>
        </div>
        <div class="tab-content" id="dc-about-tab" style="display: block;">
            <p style="text-align: center;">
                <b>Key Exchanger</b>
            </p>
            <br/>

            <strong>What is this used for?</strong>
            <ul class="dc-list">
                <li>This simplifies the process or generating secure keys for each conversation.</li>
                <li>Using this generator, you may create new keys using standard algorithms such as
                    DH or ECDH for manual handshakes.</li>
                <li>Follow the steps below to generate a password between channels or users
                    while being able to publicly post the messages.</li>
                <li>This generator uses secure hash algorithms ( SHA3-256 and SHA3-512 ) in tandem with
                    the Scrypt KDF function to derive two keys.</li>
            </ul>
            <br/>

            <strong>How do I use this?</strong>
            <p class="dc-hint">
                A more detailed guide for this is available
                <a href="https://gitlab.com/leogx9r/DiscordCrypt#exchanging-keys" target="_blank">here</a>.
            </p>
            <ul class="dc-list">
                <li>Generate a key pair using the specified algorithm and key size on the
                    "Key Generation" tab.</li>
                <li>Give your partner your public key by clicking the "Send Public Key" button.</li>
                <li>Ask your partner to give you their public key using the same step above.</li>
                <li>Copy your partner's public key and paste it in the "Secret Computation" tab and
                    select "Compute Secret Keys".</li>
                <li>Wait for <span style="text-decoration: underline;color: #ff0000;">BOTH</span>
                    the primary and secondary keys to be generated.</li>
                <li>A status bar is provided to easily tell you when both passwords
                    have been generated.</li>
                <li>Click the "Apply Generated Passwords" button to apply both passwords to
                    the current user or channel.</li>
            </ul>

            <strong>Exchange Algorithms Supported:</strong>
            <ul class="dc-list">
                <li>
                    <a title="Diffie–Hellman key exchange"
                       href="https://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange"
                       target="_blank" rel="noopener">Diffie-Hellman ( DH )</a>
                </li>
                <li>
                    <a title="Elliptic curve Diffie–Hellman"
                       href="https://en.wikipedia.org/wiki/Elliptic_curve_Diffie%E2%80%93Hellman"
                       target="_blank" rel="noopener">Elliptic Curve Diffie-Hellman ( ECDH )</a>
                </li>
            </ul>

            <span style="text-decoration: underline; color: #ff0000;">
                            <strong>DO NOT:</strong>
                        </span>
            <ul class="dc-list dc-list-red">
                <li>
                    <strong>Post your private key. If you do, generate a new one IMMEDIATELY.</strong>
                </li>
                <li>
                    <strong>Alter your public key or have your partner alter theirs in any way.</strong>
                </li>
                <li>
                    <strong>Insert a random public key.</strong>
                </li>
            </ul>

            <br/><br/><br/><br/>
        </div>
        <div class="tab-content" id="dc-keygen-tab">
            <p style="text-align: center;">
                <b style="font-size: large;">Secure Key Generation</b>
            </p>
            <br/>

            <strong>Exchange Algorithm:</strong>
            <select id="dc-keygen-method" title="Exchange Algorithm">
                <option value="dh">Diffie-Hellman</option>
                <option value="ecdh" selected>Elliptic-Curve Diffie-Hellman</option>
            </select>
            <br/><br/>

            <strong>Key Length ( Bits ):</strong>
            <select id="dc-keygen-algorithm" title="Key Length">
                <option value="224">224</option>
                <option value="256">256</option>
                <option value="384">384</option>
                <option value="409">409</option>
                <option value="521">521</option>
                <option value="571" selected>571</option>
            </select>
            <br/><br/>

            <div class="dc-ruler-align">
                <button id="dc-keygen-gen-btn" class="dc-button">Generate</button>
                <button id="dc-keygen-clear-btn" class="dc-button dc-button-inverse">Clear</button>
            </div>
            <br/><br/><br/>

            <strong>Private Key: (
                <span style="text-decoration: underline; color: #ff0000;">KEEP SECRET</span>
                )</strong><br/>
            <textarea id="dc-priv-key-ta" rows="8" cols="128" maxsize="8192"
                      unselectable="on" disabled readonly title="Private Key"/>
            <br/><br/>

            <strong>Public Key:</strong><br/>
            <textarea id="dc-pub-key-ta" rows="8" cols="128" maxsize="8192"
                      unselectable="on" disabled readonly title="Public Key"/>
            <br/><br/>

            <div class="dc-ruler-align">
                <button id="dc-keygen-send-pub-btn" class="dc-button">Send Public Key</button>
            </div>
            <br/>

            <ul class="dc-list dc-list-red">
                <li>Never rely on copying these keys. Use the "Send Public Key" button
                    to send your key.</li>
                <li>Public keys are automatically encoded with a random salts.</li>
                <li>Posting these keys directly won't work since they aren't encoded
                    in the format required.</li>
            </ul>

            <br/><br/><br/><br/>
        </div>
        <div class="tab-content" id="dc-handshake-tab">
            <p style="text-align: center;">
                <b style="font-size: large;">Key Derivation</b>
            </p>
            <br/>

            <p>
                <span style="text-decoration: underline; color: #ff0000;">
                    <strong>NOTE:</strong>
                </span>
            </p>
            <ul class="dc-list dc-list-red">
                <li>Copy your partner's private key EXACTLY as it was posted.</li>
                <li>Your last generated private key from the "Key Generation" tab
                    will be used to compute these keys.</li>
            </ul>
            <br/>

            <strong>Partner's Public Key:</strong><br/>
            <textarea id="dc-handshake-ppk" rows="8" cols="128" maxsize="16384" title="Partner's Public Key"/>
            <br/><br/>

            <div class="dc-ruler-align">
                <button id="dc-handshake-paste-btn" class="dc-button dc-button-inverse">
                    Paste From Clipboard</button>
                <button id="dc-handshake-compute-btn" class="dc-button">Compute Secret Keys</button>
            </div>

            <ul class="dc-list dc-list-red">
                <li id="dc-handshake-algorithm">...</li>
                <li id="dc-handshake-salts">...</li>
                <li id="dc-handshake-secret">...</li>
            </ul>
            <br/>

            <strong id="dc-handshake-prim-lbl">Primary Secret:</strong><br/>
            <textarea id="dc-handshake-primary-key" rows="1" columns="128" maxsize="32768"
                      style="max-height: 14px;user-select: none;" unselectable="on" disabled
                      title="Primary Secret"/>
            <br/><br/>

            <strong id="dc-handshake-sec-lbl">Secondary Secret:</strong><br/>
            <textarea id="dc-handshake-secondary-key" rows="1" columns="128" maxsize="32768"
                      style="max-height: 14px;user-select: none;" unselectable="on" disabled
                      title="Secondary Secret"/>
            <br/><br/>

            <div class="stat stat-bar" style="width:70%;">
                <span id="dc-exchange-status" class="stat-bar-rating" style="width: 0;"/>
            </div><br/>

            <div class="dc-ruler-align">
                <button id="dc-handshake-cpy-keys-btn" class="dc-button dc-button-inverse">
                    Copy Keys & Nuke</button>
                <button id="dc-handshake-apply-keys-btn" class="dc-button">
                    Apply Generated Passwords</button>
            </div>

            <br/><br/><br/><br/>
        </div>
    </div>
</div>
